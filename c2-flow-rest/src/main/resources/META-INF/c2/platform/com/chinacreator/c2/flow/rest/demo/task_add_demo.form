<?xml version="1.0" encoding="UTF-8"?>
<form:Form xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dync="http://www.chinacreator.com/platform/mvc/ui/dync" xmlns:form="http://www.chinacreator.com/platform/mvc/form" name="启动流程" sn="task_add_demo" type="form">
  <form:control type="page/modal">
    <form:attributes source="page/modal"/>
  </form:control>
  <form:child xsi:type="form:Group" id="newGroupId" name="新分组">
    <form:control type="container/div">
      <form:attributes source="container/div">
        <dync:attribute default="false" group="HTML配置" id="pure" name="简单div" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="12" group="HTML配置" id="span" name="占位数" value="12">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="0" group="HTML配置" id="offset" name="偏移" value="0">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="HTML配置" id="collapse" name="隐藏" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="defaultCollapse" name="隐藏默认值" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="autoHeight" name="自动高度" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="false" group="HTML配置" id="nopadding" name="无内边距" value="false">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="html" name="自定义HTML" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="cssClass" name="自定义class" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
        <dync:attribute default="" group="高级自定义" id="style" name="自定义style" value="">
          <dync:render/>
          <dync:children/>
        </dync:attribute>
      </form:attributes>
    </form:control>
    <form:child xsi:type="form:Field" binding="$params.jsonStr" id="textarea" name="创建流程实例参数" customize="true">
      <form:control type="widget/textarea">
        <form:attributes source="widget/textarea">
          <dync:attribute default="false" group="数据校验" id="required" name="必填项" value="true">
            <dync:render colSpan="1" height="0" multi="false" name="checkboxAndExpr"/>
            <dync:children/>
          </dync:attribute>
          <dync:attribute default="" group="HTML设置" id="value" name="默认值" value="{&#xD;&#xA;  &quot;businessData&quot;: {&#xD;&#xA;    &quot;businessKey&quot;: &quot;123456&quot;,&#xD;&#xA;    &quot;appId&quot;: &quot;app1&quot;,&#xD;&#xA;    &quot;moduleId&quot;: &quot;m1&quot;,&#xD;&#xA;    &quot;moduleName&quot;: &quot;模块1&quot;&#xD;&#xA;  },&#xD;&#xA;  &quot;processDefinitionKey&quot;: &quot;t2&quot;,&#xD;&#xA;  &quot;variables&quot;: [&#xD;&#xA;    {&#xD;&#xA;      &quot;name&quot;: &quot;test_param1&quot;,&#xD;&#xA;      &quot;type&quot;: &quot;string&quot;,&#xD;&#xA;      &quot;variableScope&quot;: &quot;LOCAL&quot;,&#xD;&#xA;      &quot;value&quot;:&quot;test_param1_value&quot; &#xD;&#xA;    }&#xD;&#xA;  ]&#xD;&#xA;}">
            <dync:render colSpan="1" height="0" multi="false" name="text"/>
            <dync:children/>
          </dync:attribute>
          <dync:attribute default="3" group="HTML设置" id="rows" name="行高" value="20">
            <dync:render colSpan="1" height="0" multi="false" name="text"/>
            <dync:children/>
          </dync:attribute>
        </form:attributes>
      </form:control>
      <form:validation/>
    </form:child>
  </form:child>
  <form:child xsi:type="form:Group" id="toolbarModalFooter" name="对话框工具条">
    <form:control type="container/toolbar_modal_footer">
      <form:attributes source="container/toolbar_modal_footer"/>
    </form:control>
    <form:child xsi:type="form:Field" id="button" name="启动流程" customize="true">
      <form:control type="widget/button">
        <form:attributes source="widget/button">
          <dync:attribute default="" group="事件设置" id="click" name="点击事件" value="button_click($event)">
            <dync:render colSpan="1" height="0" multi="false" name="event">
              <dync:item name="params" value="$event"/>
            </dync:render>
            <dync:children/>
          </dync:attribute>
        </form:attributes>
      </form:control>
      <form:validation/>
    </form:child>
  </form:child>
  <form:datasources>
    <form:datasource xsi:type="form:Inputs"/>
  </form:datasources>
  <form:scripts>
button_click:function($event){
	if($params.jsonStr){
		var parameter=JSON.parse($params.jsonStr);
		$http.post(&quot;v1/flow/runtime/instances&quot;,parameter).success(function(data){
			Messenger.success(&quot;成功启动流程实例：&quot;+data.id);
			Modal.instance.close();
		});
	}
}</form:scripts>
</form:Form>
